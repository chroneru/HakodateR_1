
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Mecab &#8212; HakodateR_1 1.0 ドキュメント</title>
    
    <link rel="stylesheet" href="../_static/scrolls.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="prev" title="Twiiter API" href="01_twitter_api.html" /> 
  </head><body>
    <div id="content">
      <div class="header">
        <h1 class="heading"><a href="../index.html"
          title="back to the documentation overview"><span>Mecab</span></a></h1>
      </div>
      <div class="relnav" role="navigation" aria-label="related navigation">
        <a href="01_twitter_api.html">&laquo; Twiiter API</a> |
        <a href="#">Mecab</a>
      </div>
      <div id="contentwrapper">
        <div id="toc" role="navigation" aria-label="table of contents navigation">
          <h3>Table of Contents</h3>
          <ul>
<li><a class="reference internal" href="#">Mecab</a><ul>
<li><a class="reference internal" href="#centos">CentOS</a></li>
<li><a class="reference internal" href="#ubuntu">Ubuntu</a></li>
<li><a class="reference internal" href="#mac">Mac</a></li>
<li><a class="reference internal" href="#windows">Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rmecab">RMeCab</a></li>
<li><a class="reference internal" href="#wordcloud">WordCloud</a><ul>
<li><a class="reference internal" href="#id2">フォント</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id3">実際にやってみよう!</a></li>
</ul>

        </div>
        
  <div class="section" id="mecab">
<h1>Mecab<a class="headerlink" href="#mecab" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>日本語を名詞や動詞などにわけて解析(形態素解析)するなら、MeCabを使おう!</p>
<div class="section" id="centos">
<h2>CentOS<a class="headerlink" href="#centos" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo yum install https://packages.groonga.org/centos/groonga-release-latest.noarch.rpm
sudo yum install groonga
sudo yum install mecab
sudo yum install mecab-ipadic
sudo yum install mecab-devel
</pre></div>
</div>
</div>
<div class="section" id="ubuntu">
<h2>Ubuntu<a class="headerlink" href="#ubuntu" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install mecab
sudo apt-get install libmecab-dev
sudo apt-get install mecab-ipadic-utf8
</pre></div>
</div>
</div>
<div class="section" id="mac">
<h2>Mac<a class="headerlink" href="#mac" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>brew install mecab
brew install mecab-ipadic
</pre></div>
</div>
</div>
<div class="section" id="windows">
<h2>Windows<a class="headerlink" href="#windows" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://taku910.github.io/mecab/">github</a> から.exe(実行ファイル)をダウンロード</li>
<li><a class="reference external" href="https://github.com/ikegami-yukino/mecab/releases/tag/v0.996">こちらからも</a> ダウンロードできます。</li>
<li>mecab-0.996.exeを実行してインストール</li>
</ul>
</div>
</div>
<div class="section" id="rmecab">
<h1>RMeCab<a class="headerlink" href="#rmecab" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>RでMeCabを使うためのパッケージ</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;RMeCab&quot;</span><span class="p">,</span> <span class="n">repos</span> <span class="o">=</span> <span class="s">&quot;http://rmecab.jp/R&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="wordcloud">
<h1>WordCloud<a class="headerlink" href="#wordcloud" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>wordcloudという図をつくるためのパッケージ</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;wordcloud&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="id2">
<h2>フォント<a class="headerlink" href="#id2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>念の為、フォントのインストールも載せておく</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>fc-list <span class="p">|</span> grep Gothic
sudo yum install ipa-pgothic-fonts
</pre></div>
</div>
</div>
</div>
<div class="section" id="id3">
<h1>実際にやってみよう!<a class="headerlink" href="#id3" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">rtweet</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">RMeCab</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">wordcloud</span><span class="p">)</span>

<span class="c1"># ---------------------- twitter ------------------------------</span>

<span class="nf">source</span><span class="p">(</span><span class="s">&quot;init_token.R&quot;</span><span class="p">)</span>

<span class="nf">create_token</span><span class="p">(</span>
   <span class="n">app</span> <span class="o">=</span> <span class="n">app</span><span class="p">,</span>
   <span class="n">consumer_key</span> <span class="o">=</span> <span class="n">consumer_key</span><span class="p">,</span>
   <span class="n">consumer_secret</span> <span class="o">=</span> <span class="n">consumer_secret</span><span class="p">,</span>
   <span class="n">access_token</span> <span class="o">=</span> <span class="n">access_token</span><span class="p">,</span>
   <span class="n">access_secret</span> <span class="o">=</span> <span class="n">access_secret</span>
<span class="p">)</span>

<span class="n">query</span> <span class="o">&lt;-</span> <span class="s">&#39;&quot;#rstats&quot; OR &quot;R言語&quot; OR &quot;r言語&quot; OR &quot;#tokyor&quot; OR &quot;#SappoRoR&quot; OR &quot;#HakodateR&quot;&#39;</span>

<span class="n">tweets</span> <span class="o">&lt;-</span> <span class="nf">search_tweets</span><span class="p">(</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">query</span><span class="p">,</span>
    <span class="n">n</span> <span class="o">=</span> <span class="m">1000</span><span class="p">,</span>
    <span class="n">include_rts</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span>
    <span class="n">lang</span> <span class="o">=</span> <span class="s">&quot;ja&quot;</span>
<span class="p">)</span>

<span class="n">regexp</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;[^a-zA-Z亜-熙ぁ-んァ-ヶー0-9]?(rstats)?([Tt]okyo[Rr])?([Ss]apporo[Rr])?([Hh]akodate[Rr])?&quot;</span><span class="p">)</span>

<span class="n">tweets_shaped</span> <span class="o">&lt;-</span> <span class="n">tweets</span> <span class="o">%&gt;%</span>
    <span class="nf">distinct</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="o">%&gt;%</span> 
    <span class="nf">pull</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="o">%&gt;%</span> 
    <span class="nf">str_remove_all</span><span class="p">(</span><span class="n">pattern</span> <span class="o">=</span> <span class="n">regexp</span><span class="p">)</span> <span class="o">%&gt;%</span> 
    <span class="nf">as.tibble</span><span class="p">()</span>

<span class="nf">write_csv</span><span class="p">(</span><span class="n">tweets_shaped</span><span class="p">,</span> <span class="s">&quot;./src_R/result.csv&quot;</span><span class="p">)</span>

<span class="c1"># -------------------------------------------------------------</span>

<span class="c1"># ---------------------- 形態素解析 ---------------------------</span>

<span class="n">docDF_hakodate</span> <span class="o">&lt;-</span> <span class="nf">docDF</span><span class="p">(</span>
    <span class="s">&quot;src_R/result.csv&quot;</span><span class="p">,</span>
    <span class="n">type</span> <span class="o">=</span> <span class="m">1</span>
<span class="p">)</span>

<span class="n">docDF_hakodate_filtered</span> <span class="o">&lt;-</span> <span class="n">docDF_hakodate</span> <span class="o">%&gt;%</span>
    <span class="nf">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">str_detect</span><span class="p">(</span><span class="n">.$TERM</span><span class="p">,</span> <span class="s">&quot;(http|[0-9]+)&quot;</span><span class="p">),</span>
           <span class="n">POS1</span> <span class="o">==</span> <span class="s">&quot;名詞&quot;</span><span class="p">,</span>
           <span class="o">!</span><span class="n">POS2</span> <span class="o">%in%</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;非自立&quot;</span><span class="p">,</span> <span class="s">&quot;サ変接続&quot;</span><span class="p">,</span> <span class="s">&quot;代名詞&quot;</span><span class="p">,</span> <span class="s">&quot;接尾&quot;</span><span class="p">),</span>
           <span class="nf">map</span><span class="p">(</span><span class="n">.$TERM</span><span class="p">,</span> <span class="n">str_length</span><span class="p">)</span> <span class="o">!=</span> <span class="m">1</span>
    <span class="p">)</span> <span class="o">%&gt;%</span> 
    <span class="nf">distinct</span><span class="p">(</span><span class="n">TERM</span><span class="p">,</span> <span class="n">.keep_all</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span>

<span class="c1"># -------------------------------------------------------------</span>

<span class="c1"># ----------------------- word cloud の作成 -------------------</span>

<span class="nf">png</span><span class="p">(</span><span class="n">file</span> <span class="o">=</span> <span class="s">&quot;wordcloud.png&quot;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="m">1280</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="m">800</span><span class="p">)</span>
<span class="nf">wordcloud</span><span class="p">(</span>
    <span class="n">docDF_hakodate_filtered</span><span class="o">$</span><span class="n">TERM</span><span class="p">,</span>
    <span class="n">docDF_hakodate_filtered</span><span class="o">$</span><span class="n">result.csv</span><span class="p">,</span>
    <span class="n">min.freq</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span>
    <span class="n">scale</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">0.5</span><span class="p">),</span>
    
    <span class="n">random.order</span> <span class="o">=</span> <span class="bp">F</span><span class="p">,</span>
    
    <span class="c1"># fontの指定</span>
    <span class="n">family</span> <span class="o">=</span> <span class="s">&quot;IPAPGothic&quot;</span><span class="p">,</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="nf">brewer.pal</span><span class="p">(</span><span class="m">8</span><span class="p">,</span> <span class="s">&quot;Dark2&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="nf">dev.off</span><span class="p">()</span>

<span class="c1"># -------------------------------------------------------------</span>
</pre></div>
</div>
</div>


      </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, chroneru.
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4 で生成しました。
    </div>
  </body>
</html>